{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar rxjs_1 = require(\"rxjs\");\n\nvar operators_1 = require(\"rxjs/operators\");\n\nvar core_1 = require(\"@angular/core\");\n\nvar drop_event_model_1 = require(\"../shared/drop-event.model\");\n\nvar ng_drag_drop_service_1 = require(\"../services/ng-drag-drop.service\");\n\nvar dom_helper_1 = require(\"../shared/dom-helper\");\n\nvar ɵngcc0 = require('@angular/core');\n\nvar ɵngcc1 = require('../services/ng-drag-drop.service');\n\nvar Droppable =\n/** @class */\nfunction () {\n  function Droppable(el, renderer, ng2DragDropService, zone) {\n    this.el = el;\n    this.renderer = renderer;\n    this.ng2DragDropService = ng2DragDropService;\n    this.zone = zone;\n    /**\r\n     *  Event fired when Drag dragged element enters a valid drop target.\r\n     */\n\n    this.onDragEnter = new core_1.EventEmitter();\n    /**\r\n     * Event fired when an element is being dragged over a valid drop target\r\n     */\n\n    this.onDragOver = new core_1.EventEmitter();\n    /**\r\n     * Event fired when a dragged element leaves a valid drop target.\r\n     */\n\n    this.onDragLeave = new core_1.EventEmitter();\n    /**\r\n     * Event fired when an element is dropped on a valid drop target.\r\n     */\n\n    this.onDrop = new core_1.EventEmitter();\n    /**\r\n     * CSS class that is applied when a compatible draggable is being dragged over this droppable.\r\n     */\n\n    this.dragOverClass = 'drag-over-border';\n    /**\r\n     * CSS class applied on this droppable when a compatible draggable item is being dragged.\r\n     * This can be used to visually show allowed drop zones.\r\n     */\n\n    this.dragHintClass = 'drag-hint-border';\n    /**\r\n     * Defines compatible drag drop pairs. Values must match both in draggable and droppable.dropScope.\r\n     */\n\n    this.dropScope = 'default';\n    /**\r\n     * @private\r\n     * Backing field for the dropEnabled property\r\n     */\n\n    this._dropEnabled = true;\n    /**\r\n     * @private\r\n     * Field for tracking drag state. Helps when\r\n     * drag stop event occurs before the allowDrop()\r\n     * can be calculated (async).\r\n     */\n\n    this._isDragActive = false;\n    /**\r\n     * @private\r\n     * Field for tracking if service is subscribed.\r\n     * Avoids creating multiple subscriptions of service.\r\n     */\n\n    this._isServiceActive = false;\n  }\n\n  Object.defineProperty(Droppable.prototype, \"dropEnabled\", {\n    get: function () {\n      return this._dropEnabled;\n    },\n\n    /**\r\n     * Defines if drop is enabled. `true` by default.\r\n     */\n    set: function (value) {\n      this._dropEnabled = value;\n\n      if (this._dropEnabled === true) {\n        this.subscribeService();\n      } else {\n        this.unsubscribeService();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ;\n\n  Droppable.prototype.ngOnInit = function () {\n    if (this.dropEnabled === true) {\n      this.subscribeService();\n    }\n  };\n\n  Droppable.prototype.ngOnDestroy = function () {\n    this.unsubscribeService();\n    this.unbindDragListeners();\n  };\n\n  Droppable.prototype.dragEnter = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.onDragEnter.emit(e);\n  };\n\n  Droppable.prototype.dragOver = function (e, result) {\n    if (result) {\n      dom_helper_1.DomHelper.addClass(this.el, this.dragOverClass);\n      e.preventDefault();\n      this.onDragOver.emit(e);\n    }\n  };\n\n  Droppable.prototype.dragLeave = function (e) {\n    dom_helper_1.DomHelper.removeClass(this.el, this.dragOverClass);\n    e.preventDefault();\n    this.onDragLeave.emit(e);\n  };\n\n  Droppable.prototype.drop = function (e) {\n    var _this = this;\n\n    this.allowDrop().subscribe(function (result) {\n      if (result && _this._isDragActive) {\n        dom_helper_1.DomHelper.removeClass(_this.el, _this.dragOverClass);\n        e.preventDefault();\n        e.stopPropagation();\n\n        _this.ng2DragDropService.onDragEnd.next();\n\n        _this.onDrop.emit(new drop_event_model_1.DropEvent(e, _this.ng2DragDropService.dragData));\n\n        _this.ng2DragDropService.dragData = null;\n        _this.ng2DragDropService.scope = null;\n      }\n    });\n  };\n\n  Droppable.prototype.allowDrop = function () {\n    var _this = this;\n\n    var allowed = false;\n    /* tslint:disable:curly */\n\n    /* tslint:disable:one-line */\n\n    if (typeof this.dropScope === 'string') {\n      if (typeof this.ng2DragDropService.scope === 'string') allowed = this.ng2DragDropService.scope === this.dropScope;else if (this.ng2DragDropService.scope instanceof Array) allowed = this.ng2DragDropService.scope.indexOf(this.dropScope) > -1;\n    } else if (this.dropScope instanceof Array) {\n      if (typeof this.ng2DragDropService.scope === 'string') allowed = this.dropScope.indexOf(this.ng2DragDropService.scope) > -1;else if (this.ng2DragDropService.scope instanceof Array) allowed = this.dropScope.filter(function (item) {\n        return _this.ng2DragDropService.scope.indexOf(item) !== -1;\n      }).length > 0;\n    } else if (typeof this.dropScope === 'function') {\n      allowed = this.dropScope(this.ng2DragDropService.dragData);\n\n      if (allowed instanceof rxjs_1.Observable) {\n        return allowed.pipe(operators_1.map(function (result) {\n          return result && _this.dropEnabled;\n        }));\n      }\n    }\n    /* tslint:enable:curly */\n\n    /* tslint:disable:one-line */\n\n\n    return rxjs_1.of(allowed && this.dropEnabled);\n  };\n\n  Droppable.prototype.subscribeService = function () {\n    var _this = this;\n\n    if (this._isServiceActive === true) {\n      return;\n    }\n\n    this._isServiceActive = true;\n    this.dragStartSubscription = this.ng2DragDropService.onDragStart.subscribe(function () {\n      _this._isDragActive = true;\n\n      _this.allowDrop().subscribe(function (result) {\n        if (result && _this._isDragActive) {\n          dom_helper_1.DomHelper.addClass(_this.el, _this.dragHintClass);\n\n          _this.zone.runOutsideAngular(function () {\n            _this.unbindDragEnterListener = _this.renderer.listen(_this.el.nativeElement, 'dragenter', function (dragEvent) {\n              _this.dragEnter(dragEvent);\n            });\n            _this.unbindDragOverListener = _this.renderer.listen(_this.el.nativeElement, 'dragover', function (dragEvent) {\n              _this.dragOver(dragEvent, result);\n            });\n            _this.unbindDragLeaveListener = _this.renderer.listen(_this.el.nativeElement, 'dragleave', function (dragEvent) {\n              _this.dragLeave(dragEvent);\n            });\n          });\n        }\n      });\n    });\n    this.dragEndSubscription = this.ng2DragDropService.onDragEnd.subscribe(function () {\n      _this._isDragActive = false;\n      dom_helper_1.DomHelper.removeClass(_this.el, _this.dragHintClass);\n\n      _this.unbindDragListeners();\n    });\n  };\n\n  Droppable.prototype.unsubscribeService = function () {\n    this._isServiceActive = false;\n\n    if (this.dragStartSubscription) {\n      this.dragStartSubscription.unsubscribe();\n    }\n\n    if (this.dragEndSubscription) {\n      this.dragEndSubscription.unsubscribe();\n    }\n  };\n\n  Droppable.prototype.unbindDragListeners = function () {\n    if (this.unbindDragEnterListener) {\n      this.unbindDragEnterListener();\n    }\n\n    if (this.unbindDragOverListener) {\n      this.unbindDragOverListener();\n    }\n\n    if (this.unbindDragLeaveListener) {\n      this.unbindDragLeaveListener();\n    }\n  };\n  /** @nocollapse */\n\n\n  Droppable.ctorParameters = function () {\n    return [{\n      type: core_1.ElementRef\n    }, {\n      type: core_1.Renderer2\n    }, {\n      type: ng_drag_drop_service_1.NgDragDropService\n    }, {\n      type: core_1.NgZone\n    }];\n  };\n\n  Droppable.propDecorators = {\n    onDragEnter: [{\n      type: core_1.Output\n    }],\n    onDragOver: [{\n      type: core_1.Output\n    }],\n    onDragLeave: [{\n      type: core_1.Output\n    }],\n    onDrop: [{\n      type: core_1.Output\n    }],\n    dragOverClass: [{\n      type: core_1.Input\n    }],\n    dragHintClass: [{\n      type: core_1.Input\n    }],\n    dropScope: [{\n      type: core_1.Input\n    }],\n    dropEnabled: [{\n      type: core_1.Input\n    }],\n    drop: [{\n      type: core_1.HostListener,\n      args: ['drop', ['$event']]\n    }]\n  };\n\n  Droppable.ɵfac = function Droppable_Factory(t) {\n    return new (t || Droppable)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgDragDropService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  Droppable.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: Droppable,\n    selectors: [[\"\", \"droppable\", \"\"]],\n    hostBindings: function Droppable_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"drop\", function Droppable_drop_HostBindingHandler($event) {\n          return ctx.drop($event);\n        });\n      }\n    },\n    inputs: {\n      dragOverClass: \"dragOverClass\",\n      dragHintClass: \"dragHintClass\",\n      dropScope: \"dropScope\",\n      dropEnabled: \"dropEnabled\"\n    },\n    outputs: {\n      onDragEnter: \"onDragEnter\",\n      onDragOver: \"onDragOver\",\n      onDragLeave: \"onDragLeave\",\n      onDrop: \"onDrop\"\n    }\n  });\n\n  (function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Droppable, [{\n      type: core_1.Directive,\n      args: [{\n        selector: '[droppable]'\n      }]\n    }], function () {\n      return [{\n        type: ɵngcc0.ElementRef\n      }, {\n        type: ɵngcc0.Renderer2\n      }, {\n        type: ɵngcc1.NgDragDropService\n      }, {\n        type: ɵngcc0.NgZone\n      }];\n    }, {\n      onDragEnter: [{\n        type: core_1.Output\n      }],\n      onDragOver: [{\n        type: core_1.Output\n      }],\n      onDragLeave: [{\n        type: core_1.Output\n      }],\n      onDrop: [{\n        type: core_1.Output\n      }],\n      dragOverClass: [{\n        type: core_1.Input\n      }],\n      dragHintClass: [{\n        type: core_1.Input\n      }],\n      dropScope: [{\n        type: core_1.Input\n      }],\n      dropEnabled: [{\n        type: core_1.Input\n      }],\n      drop: [{\n        type: core_1.HostListener,\n        args: ['drop', ['$event']]\n      }]\n    });\n  })();\n\n  return Droppable;\n}();\n\nexports.Droppable = Droppable;","map":{"version":3,"sources":["/Users/vampi/Desktop/Dashboard/diwakar/node_modules/ng-drag-drop/__ivy_ngcc__/src/directives/droppable.directive.js"],"names":["Object","defineProperty","exports","value","rxjs_1","require","operators_1","core_1","drop_event_model_1","ng_drag_drop_service_1","dom_helper_1","ɵngcc0","ɵngcc1","Droppable","el","renderer","ng2DragDropService","zone","onDragEnter","EventEmitter","onDragOver","onDragLeave","onDrop","dragOverClass","dragHintClass","dropScope","_dropEnabled","_isDragActive","_isServiceActive","prototype","get","set","subscribeService","unsubscribeService","enumerable","configurable","ngOnInit","dropEnabled","ngOnDestroy","unbindDragListeners","dragEnter","e","preventDefault","stopPropagation","emit","dragOver","result","DomHelper","addClass","dragLeave","removeClass","drop","_this","allowDrop","subscribe","onDragEnd","next","DropEvent","dragData","scope","allowed","Array","indexOf","filter","item","length","Observable","pipe","map","of","dragStartSubscription","onDragStart","runOutsideAngular","unbindDragEnterListener","listen","nativeElement","dragEvent","unbindDragOverListener","unbindDragLeaveListener","dragEndSubscription","unsubscribe","ctorParameters","type","ElementRef","Renderer2","NgDragDropService","NgZone","propDecorators","Output","Input","HostListener","args","ɵfac","Droppable_Factory","t","ɵɵdirectiveInject","ɵdir","ɵɵdefineDirective","selectors","hostBindings","Droppable_HostBindings","rf","ctx","ɵɵlistener","Droppable_drop_HostBindingHandler","$event","inputs","outputs","ngDevMode","ɵsetClassMetadata","Directive","selector"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar rxjs_1 = require(\"rxjs\");\r\nvar operators_1 = require(\"rxjs/operators\");\r\nvar core_1 = require(\"@angular/core\");\r\nvar drop_event_model_1 = require(\"../shared/drop-event.model\");\r\nvar ng_drag_drop_service_1 = require(\"../services/ng-drag-drop.service\");\r\nvar dom_helper_1 = require(\"../shared/dom-helper\");\r\nvar ɵngcc0 = require('@angular/core');\nvar ɵngcc1 = require('../services/ng-drag-drop.service');\nvar Droppable = /** @class */ (function () {\r\n    function Droppable(el, renderer, ng2DragDropService, zone) {\r\n        this.el = el;\r\n        this.renderer = renderer;\r\n        this.ng2DragDropService = ng2DragDropService;\r\n        this.zone = zone;\r\n        /**\r\n         *  Event fired when Drag dragged element enters a valid drop target.\r\n         */\r\n        this.onDragEnter = new core_1.EventEmitter();\r\n        /**\r\n         * Event fired when an element is being dragged over a valid drop target\r\n         */\r\n        this.onDragOver = new core_1.EventEmitter();\r\n        /**\r\n         * Event fired when a dragged element leaves a valid drop target.\r\n         */\r\n        this.onDragLeave = new core_1.EventEmitter();\r\n        /**\r\n         * Event fired when an element is dropped on a valid drop target.\r\n         */\r\n        this.onDrop = new core_1.EventEmitter();\r\n        /**\r\n         * CSS class that is applied when a compatible draggable is being dragged over this droppable.\r\n         */\r\n        this.dragOverClass = 'drag-over-border';\r\n        /**\r\n         * CSS class applied on this droppable when a compatible draggable item is being dragged.\r\n         * This can be used to visually show allowed drop zones.\r\n         */\r\n        this.dragHintClass = 'drag-hint-border';\r\n        /**\r\n         * Defines compatible drag drop pairs. Values must match both in draggable and droppable.dropScope.\r\n         */\r\n        this.dropScope = 'default';\r\n        /**\r\n         * @private\r\n         * Backing field for the dropEnabled property\r\n         */\r\n        this._dropEnabled = true;\r\n        /**\r\n         * @private\r\n         * Field for tracking drag state. Helps when\r\n         * drag stop event occurs before the allowDrop()\r\n         * can be calculated (async).\r\n         */\r\n        this._isDragActive = false;\r\n        /**\r\n         * @private\r\n         * Field for tracking if service is subscribed.\r\n         * Avoids creating multiple subscriptions of service.\r\n         */\r\n        this._isServiceActive = false;\r\n    }\r\n    Object.defineProperty(Droppable.prototype, \"dropEnabled\", {\r\n        get: function () {\r\n            return this._dropEnabled;\r\n        },\r\n        /**\r\n         * Defines if drop is enabled. `true` by default.\r\n         */\r\n        set: function (value) {\r\n            this._dropEnabled = value;\r\n            if (this._dropEnabled === true) {\r\n                this.subscribeService();\r\n            }\r\n            else {\r\n                this.unsubscribeService();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Droppable.prototype.ngOnInit = function () {\r\n        if (this.dropEnabled === true) {\r\n            this.subscribeService();\r\n        }\r\n    };\r\n    Droppable.prototype.ngOnDestroy = function () {\r\n        this.unsubscribeService();\r\n        this.unbindDragListeners();\r\n    };\r\n    Droppable.prototype.dragEnter = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.onDragEnter.emit(e);\r\n    };\r\n    Droppable.prototype.dragOver = function (e, result) {\r\n        if (result) {\r\n            dom_helper_1.DomHelper.addClass(this.el, this.dragOverClass);\r\n            e.preventDefault();\r\n            this.onDragOver.emit(e);\r\n        }\r\n    };\r\n    Droppable.prototype.dragLeave = function (e) {\r\n        dom_helper_1.DomHelper.removeClass(this.el, this.dragOverClass);\r\n        e.preventDefault();\r\n        this.onDragLeave.emit(e);\r\n    };\r\n    Droppable.prototype.drop = function (e) {\r\n        var _this = this;\r\n        this.allowDrop().subscribe(function (result) {\r\n            if (result && _this._isDragActive) {\r\n                dom_helper_1.DomHelper.removeClass(_this.el, _this.dragOverClass);\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                _this.ng2DragDropService.onDragEnd.next();\r\n                _this.onDrop.emit(new drop_event_model_1.DropEvent(e, _this.ng2DragDropService.dragData));\r\n                _this.ng2DragDropService.dragData = null;\r\n                _this.ng2DragDropService.scope = null;\r\n            }\r\n        });\r\n    };\r\n    Droppable.prototype.allowDrop = function () {\r\n        var _this = this;\r\n        var allowed = false;\r\n        /* tslint:disable:curly */\r\n        /* tslint:disable:one-line */\r\n        if (typeof this.dropScope === 'string') {\r\n            if (typeof this.ng2DragDropService.scope === 'string')\r\n                allowed = this.ng2DragDropService.scope === this.dropScope;\r\n            else if (this.ng2DragDropService.scope instanceof Array)\r\n                allowed = this.ng2DragDropService.scope.indexOf(this.dropScope) > -1;\r\n        }\r\n        else if (this.dropScope instanceof Array) {\r\n            if (typeof this.ng2DragDropService.scope === 'string')\r\n                allowed = this.dropScope.indexOf(this.ng2DragDropService.scope) > -1;\r\n            else if (this.ng2DragDropService.scope instanceof Array)\r\n                allowed = this.dropScope.filter(function (item) {\r\n                    return _this.ng2DragDropService.scope.indexOf(item) !== -1;\r\n                }).length > 0;\r\n        }\r\n        else if (typeof this.dropScope === 'function') {\r\n            allowed = this.dropScope(this.ng2DragDropService.dragData);\r\n            if (allowed instanceof rxjs_1.Observable) {\r\n                return allowed.pipe(operators_1.map(function (result) { return result && _this.dropEnabled; }));\r\n            }\r\n        }\r\n        /* tslint:enable:curly */\r\n        /* tslint:disable:one-line */\r\n        return rxjs_1.of(allowed && this.dropEnabled);\r\n    };\r\n    Droppable.prototype.subscribeService = function () {\r\n        var _this = this;\r\n        if (this._isServiceActive === true) {\r\n            return;\r\n        }\r\n        this._isServiceActive = true;\r\n        this.dragStartSubscription = this.ng2DragDropService.onDragStart.subscribe(function () {\r\n            _this._isDragActive = true;\r\n            _this.allowDrop().subscribe(function (result) {\r\n                if (result && _this._isDragActive) {\r\n                    dom_helper_1.DomHelper.addClass(_this.el, _this.dragHintClass);\r\n                    _this.zone.runOutsideAngular(function () {\r\n                        _this.unbindDragEnterListener = _this.renderer.listen(_this.el.nativeElement, 'dragenter', function (dragEvent) {\r\n                            _this.dragEnter(dragEvent);\r\n                        });\r\n                        _this.unbindDragOverListener = _this.renderer.listen(_this.el.nativeElement, 'dragover', function (dragEvent) {\r\n                            _this.dragOver(dragEvent, result);\r\n                        });\r\n                        _this.unbindDragLeaveListener = _this.renderer.listen(_this.el.nativeElement, 'dragleave', function (dragEvent) {\r\n                            _this.dragLeave(dragEvent);\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        this.dragEndSubscription = this.ng2DragDropService.onDragEnd.subscribe(function () {\r\n            _this._isDragActive = false;\r\n            dom_helper_1.DomHelper.removeClass(_this.el, _this.dragHintClass);\r\n            _this.unbindDragListeners();\r\n        });\r\n    };\r\n    Droppable.prototype.unsubscribeService = function () {\r\n        this._isServiceActive = false;\r\n        if (this.dragStartSubscription) {\r\n            this.dragStartSubscription.unsubscribe();\r\n        }\r\n        if (this.dragEndSubscription) {\r\n            this.dragEndSubscription.unsubscribe();\r\n        }\r\n    };\r\n    Droppable.prototype.unbindDragListeners = function () {\r\n        if (this.unbindDragEnterListener) {\r\n            this.unbindDragEnterListener();\r\n        }\r\n        if (this.unbindDragOverListener) {\r\n            this.unbindDragOverListener();\r\n        }\r\n        if (this.unbindDragLeaveListener) {\r\n            this.unbindDragLeaveListener();\r\n        }\r\n    };\r\n    /** @nocollapse */\r\n    Droppable.ctorParameters = function () { return [\r\n        { type: core_1.ElementRef },\r\n        { type: core_1.Renderer2 },\r\n        { type: ng_drag_drop_service_1.NgDragDropService },\r\n        { type: core_1.NgZone }\r\n    ]; };\r\n    Droppable.propDecorators = {\r\n        onDragEnter: [{ type: core_1.Output }],\r\n        onDragOver: [{ type: core_1.Output }],\r\n        onDragLeave: [{ type: core_1.Output }],\r\n        onDrop: [{ type: core_1.Output }],\r\n        dragOverClass: [{ type: core_1.Input }],\r\n        dragHintClass: [{ type: core_1.Input }],\r\n        dropScope: [{ type: core_1.Input }],\r\n        dropEnabled: [{ type: core_1.Input }],\r\n        drop: [{ type: core_1.HostListener, args: ['drop', ['$event'],] }]\r\n    };\nDroppable.ɵfac = function Droppable_Factory(t) { return new (t || Droppable)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgDragDropService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };\nDroppable.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: Droppable, selectors: [[\"\", \"droppable\", \"\"]], hostBindings: function Droppable_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"drop\", function Droppable_drop_HostBindingHandler($event) { return ctx.drop($event); });\n    } }, inputs: { dragOverClass: \"dragOverClass\", dragHintClass: \"dragHintClass\", dropScope: \"dropScope\", dropEnabled: \"dropEnabled\" }, outputs: { onDragEnter: \"onDragEnter\", onDragOver: \"onDragOver\", onDragLeave: \"onDragLeave\", onDrop: \"onDrop\" } });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Droppable, [{\n        type: core_1.Directive,\n        args: [{\n                selector: '[droppable]'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc1.NgDragDropService }, { type: ɵngcc0.NgZone }]; }, { onDragEnter: [{\n            type: core_1.Output\n        }], onDragOver: [{\n            type: core_1.Output\n        }], onDragLeave: [{\n            type: core_1.Output\n        }], onDrop: [{\n            type: core_1.Output\n        }], dragOverClass: [{\n            type: core_1.Input\n        }], dragHintClass: [{\n            type: core_1.Input\n        }], dropScope: [{\n            type: core_1.Input\n        }], dropEnabled: [{\n            type: core_1.Input\n        }], drop: [{\n            type: core_1.HostListener,\n            args: ['drop', ['$event']]\n        }] }); })();\r\n    return Droppable;\r\n}());\r\nexports.Droppable = Droppable;\r\n\n"]},"metadata":{},"sourceType":"script"}